[settings]
disable_backends = ["dotnet", "gem", "go", "pipx", "spm", "vfox"]

[tools]
"asdf:aws" = "2.18.3"
bun = "1.2.16"
coursier = "2.1.24"
dotnet = "9.0.102"
go = "1.25.3"
gradle = "9.1.0"
java = "25.0.0"
julia = "1.11.7"
kotlin = "2.2.0"
lua = "5.1"
node = "24.2.0"
opam = "2.3.0"
perl = "5.40.1.0"
poetry = "2.0.1"
python = "3.14.0"
ruby = "3.4.4"
rust = "1.90.0"
scala = "3.6.3"
terraform = "1.12.2"
uv = "0.8.11"
zig = "0.15.1"

[env]
PROJECT = "{{ cwd | basename }}"
NVIM_ROOT = "{% if env.PROJECT == 'neovim' %}{{ cwd }}{% else %}~/dev/repos/tools/neovim{% endif %}"

[tasks."nvim:clean"]
dir = "{{ env.NVIM_ROOT }}"
run = ["make distclean", "make clean"]

[tasks."nvim:build"]
dir = "{{ env.NVIM_ROOT }}"
depends = "nvim:clean"
run = "make CMAKE_BUILD_TYPE=Release"

[tasks."nvim:test"]
dir = "{{ env.NVIM_ROOT }}"
env = { NODE_PATH = "{{ exec(command='npm root -g') }}" }
run = "make test"

[tasks."nvim:run"]
run = "VIMRUNTIME={{ env.NVIM_ROOT }}/runtime {{ env.NVIM_ROOT }}/build/bin/nvim"
