#!/usr/bin/env python

import subprocess
from argparse import ArgumentParser


def main() -> None:
    branches = run("git branch").split("\n")
    assert len(branches) == 2, f"Only possible with 2 branches found {len(branches)}"
    branch = branches[1] if branches[0].startswith("*") else branches[0]
    run(f"git checkout {branch}")


def run(command: str) -> str:
    result = subprocess.run(command.split(), capture_output=True, text=True)
    if result.returncode == 0:
        return result.stdout.strip()
    else:
        raise Exception(f"{command} failed due to: {result.stderr.strip()}")


if __name__ == "__main__":
    parser = ArgumentParser(description="Change between 2 branches in a git repo")
    parser.parse_args()
    main()
